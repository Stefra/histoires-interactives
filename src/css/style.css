/* ===================================== */
/* ===      Styles Généraux          === */
/* ===================================== */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

body {
  font-family: 'Georgia', serif;
  background-color: #222; /* Fond sombre principal */
  color: #f4f4f4;       /* Texte clair par défaut */
  line-height: 1.6;     /* Interligne pour lisibilité */
}

a { /* Style global des liens */
  color: #e8491d; /* Couleur orange */
  text-decoration: none;
}

a:hover {
  color: #f4f4f4; /* Changement au survol */
}

/* ===================================== */
/* ===      Layout Principal         === */
/* ===================================== */
main { /* Appliqué à la balise <main> dans base.njk */
  max-width: 960px; /* Largeur maximale du contenu */
  margin: 30px auto; /* Centre horizontalement avec marges haute/basse */
  background-color: #333; /* Fond du conteneur central */
  padding: 25px 30px; /* Espace intérieur */
  border-radius: 8px; /* Coins arrondis */
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.7); /* Ombre portée */
}

/* ===================================== */
/* === Styles Page d'Accueil (index.njk) === */
/* ===================================== */

/* Titre H1 et paragraphe intro sur l'accueil */
/* Ciblage plus précis si nécessaire avec des classes */
main > h1 {
   color: #e8491d;
   text-align: center;
   margin-bottom: 15px;
   font-size: 2.5em; /* Taille titre accueil */
}

main > h1 + p {
  text-align: center;
  margin-bottom: 30px;
  color: #ccc; /* Texte d'intro un peu moins blanc */
}

/* Filtres par catégorie */
.category-filters {
  text-align: center;
  margin-bottom: 30px;
  padding-bottom: 20px;
  border-bottom: 1px solid #555; /* Ligne de séparation */
}

.category-filters .filter-button {
  background-color: #555;
  color: #f4f4f4;
  border: none;
  padding: 8px 15px;
  margin: 0 5px 10px;
  border-radius: 5px;
  cursor: pointer;
  font-family: inherit;
  font-size: 0.9em;
  transition: background-color 0.3s ease;
}

.category-filters .filter-button:hover,
.category-filters .filter-button.active { /* Style quand actif (via JS) */
  background-color: #e8491d; /* Orange */
  color: #fff;
}

/* Liste des histoires */
.story-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Colonnes responsives */
  gap: 30px; /* Espace entre les cartes */
}

/* Carte d'histoire individuelle */
.story-card {
  background-color: #444; /* Fond de carte */
  border-radius: 8px;
  overflow: hidden;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
}

.story-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.6);
}

.story-image {
  width: 100%;
  height: 180px;
  object-fit: cover;
  display: block;
  border-bottom: 3px solid #e8491d; /* Bordure image */
}

.story-content {
  padding: 20px;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}

.story-status {
  font-size: 0.8em;
  color: #aaa;
  margin-bottom: 8px;
  min-height: 1.2em; /* Espace même si vide */
  text-align: right; /* Ou left, selon préférence */
}

.story-title {
  color: #f4f4f4;
  font-size: 1.5em;
  margin-bottom: 10px;
}

.story-description {
  font-size: 0.95em;
  color: #ccc;
  margin-bottom: 15px;
  flex-grow: 1;
}

.story-link { /* Bouton "Commencer l'aventure" */
  display: block;
  background-color: #e8491d;
  color: #fff;
  padding: 12px 15px;
  border-radius: 5px;
  text-decoration: none;
  text-align: center;
  font-weight: bold;
  transition: background-color 0.3s ease;
  margin-top: auto; /* Se colle en bas */
}

.story-link:hover {
  background-color: #f05f3b; /* Orange plus clair */
  color: #fff;
}

/* ===================================================== */
/* === Styles Page d'Histoire Individuelle (histoire.njk) === */
/* ===================================================== */

/* Titre de l'histoire sur la page d'étape (H1 dans <main>) */
/* Si vous voulez une taille différente de l'accueil, ciblez plus spécifiquement */
/* main h1 { ... } est déjà défini plus haut, on peut le laisser commun */

/* Conteneur spécifique de l'étape (peu de style nécessaire ici) */
.etape-contenu {
  margin-top: 15px; /* Un peu d'espace après le H1 */
}

/* Texte principal de l'étape */
.etape-contenu > p { /* Cible le P directement enfant */
  margin-bottom: 1.5em;
  line-height: 1.7;
  font-size: 1.1em; /* Texte un peu plus grand pour l'histoire */
}

/* Image de l'étape */
.etape-contenu img {
  /* Limiter la largeur (peut être réduit si besoin, ex: 70% ou 60%) */
  max-width: 80%;

  /* === AJOUT PRINCIPAL === */
  /* Limite la hauteur maximale à 40% de la hauteur de la fenêtre */
  /* Ajustez cette valeur (ex: 35vh, 45vh) selon vos préférences */
  max-height: 40vh;

  /* Assurez-vous que ces lignes sont présentes pour maintenir les proportions */
  height: auto;  /* La hauteur s'ajuste pour garder le ratio */
  width: auto;   /* La largeur s'ajuste aussi si max-height est atteint en premier */

  /* Styles existants */
  display: block;
  margin: 25px auto;
  border-radius: 5px;
  border: 3px solid #555;
  object-fit: contain; /* Optionnel: Assure que toute l'image est visible, peut ajouter des bandes */
                      /* 'cover' (par défaut si dimensions fixes) rogne pour remplir */
}

/* Zone pour le résultat des dés */
#dice-result-area {
  min-height: 30px;
  margin: 20px 0;
  padding: 10px 15px;
  background-color: #2a2a2a;
  border: 1px solid #444;
  border-radius: 4px;
  text-align: center;
  font-weight: bold;
  color: #eee;
  /* Le contenu (texte) sera ajouté par JS */
}

/* Navigation des choix */
.choix {
  margin-top: 30px;
  margin-bottom: 25px;
  padding-top: 20px;
  border-top: 1px solid #555; /* Ligne avant les choix */
}

.choix ul {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex; /* <<< AJOUT: Active Flexbox */
  flex-wrap: wrap; /* <<< AJOUT: Permet le retour à la ligne */
  gap: 15px; /* <<< AJOUT: Espace entre les éléments de choix (horizontal et vertical si wrap) */
  /* Optionnel: alignement vertical si les éléments ont des hauteurs différentes */
  /* align-items: center;  ou flex-start, stretch, baseline */
}

.choix li {
  /* margin-bottom: 12px; <<< SUPPRIMER ou commenter cette ligne, 'gap' s'en charge */
  /* Le li devient un 'flex item', pas besoin de style spécifique ici en général */
}

/* Style commun pour les liens texte et boutons de dé */
.text-choice-link,
.dice-roll-button {
    /* display: block; <<< Garder block ou passer à inline-block si besoin, mais plus important: */
    /* width: 100%; <<< SUPPRIMER ou commenter cette ligne */
    padding: 10px 18px; /* Ajustez le padding si vous voulez des boutons moins larges */
    background-color: #555;
    color: #f4f4f4;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    font-family: inherit;
    text-align: center; /* Centrer le texte dans le bouton peut être mieux */
    text-decoration: none;
    transition: background-color 0.3s ease, transform 0.1s ease;
    /* Ajouter une largeur minimale si vous voulez éviter des boutons trop petits */
    /* min-width: 100px; */
}

.text-choice-link:hover,
.dice-roll-button:hover {
  background-color: #e8491d; /* Orange au survol */
  color: #fff;
}

.dice-roll-button:active {
   transform: scale(0.99); /* Effet clic */
}

/* Styles spécifiques pour les choix avec image */
.image-choice-link {
  display: inline-block; /* Ou block si vous voulez qu'ils prennent toute la largeur */
  text-decoration: none;
  border: 4px solid #555;
  border-radius: 8px;
  overflow: hidden; /* Important pour que le span ne déborde pas bizarrement */
  transition: border-color 0.3s ease, transform 0.2s ease;
  max-width: 200px;
  vertical-align: top;
  background-color: #444; /* Un fond pour le conteneur global du choix */
  /* Suppression de margin-right car géré par 'gap' sur l'ul */
  /* margin-bottom: 15px;  Peut être gardé si besoin d'espace vertical spécifique */
}

.image-choice-link:hover {
  border-color: #e8491d;
  transform: scale(1.05);
}

/* --- Style existant pour l'image --- */
.choice-image {
  display: block; /* L'image prend la largeur du conteneur <a> */
  width: 100%;
  height: auto;
  /* object-fit: cover; */
}

/* === NOUVEAU / MODIFIÉ : Style pour le texte SOUS l'image === */
.image-choice-text {
  display: block;       /* Force le texte à aller sous l'image */
  padding: 8px 10px;    /* Espace autour du texte */
  text-align: center;   /* Centre le texte */
  font-size: 0.9em;     /* Taille de police légèrement réduite */
  color: #f0f0f0;       /* Couleur du texte */
  background-color: #383838; /* Fond légèrement différent pour la zone texte (optionnel) */
  line-height: 1.3;     /* Hauteur de ligne pour le texte */
  min-height: 2.5em;    /* Hauteur minimale pour aligner si textes de longueurs différentes (ajuster) */
  /* Supprimer toute règle de positionnement absolue ou de display:none par défaut */
}

/* Assurez-vous qu'il n'y a PAS de règle comme celle-ci qui cache le texte: */
/* .image-choice-text { display: none; } */
/* Ou comme celle-ci qui l'affiche seulement au survol: */
/* .image-choice-link:hover .image-choice-text { display: block; } */

/* Bloc de fin d'histoire */
.fin {
  margin-top: 40px;
  padding: 25px;
  border: 2px dashed #e8491d;
  background-color: #3a3a3a;
  border-radius: 5px;
  text-align: center;
}

.fin p {
  margin-bottom: 1em;
  color: #f0f0f0;
  font-size: 1.1em;
}

.fin strong {
  color: #e8491d;
  font-size: 1.3em;
  display: block; /* Met le type sur sa propre ligne */
  margin-bottom: 10px;
}

.fin a { /* Style du lien "Retourner à l'accueil" */
  display: inline-block;
  margin-top: 15px;
  padding: 12px 25px; /* Plus large */
  background-color: #e8491d;
  color: #fff;
  border-radius: 5px;
  text-decoration: none;
  font-weight: bold;
  transition: background-color 0.3s ease;
}

.fin a:hover {
  background-color: #f05f3b;
  color: #fff;
}

/* ===================================== */
/* ===   Fin du Fichier CSS          === */
/* ===================================== */